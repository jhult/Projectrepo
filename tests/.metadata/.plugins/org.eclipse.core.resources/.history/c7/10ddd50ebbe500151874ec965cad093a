package com.MigDC1.StoreGSIIntegration;

import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.annotations.AfterClass;
import org.testng.annotations.Test;

import com.opc.common.Browser;
import com.opc.common.Login;
import com.opc.util.Utility;
import com.safc.configuration.BaseTest;
import com.safc.configuration.BrowserType;
import com.safc.configuration.Config;
import com.safc.configuration.DbConnection;


public class TAS_Test extends BaseTest{
//	WebDriver driver, driver1;
	Select select;
	  

     @Test(dataProvider = "browserType", dataProviderClass = BrowserType.class)
	   public void test(String browserName) {
	 
    try{  
//		 System.setOut(new PrintStream(new FileOutputStream(".\\log\\console.txt")));
//	     System.out.println("This is System class!!!");
	     
    	  String ssopassword = DbConnection.readDataFromExcelFile(".\\data\\TestData.xls", "Sheet1", 1, 4)	;
  	    
		   System.out.println("*-----Environment Used for testing------ *"+"\n"+Config.APP_URL +"\n" +"\n");
		   System.out.println("Executing TestCase:-  " +  this.getClass().getSimpleName());	 
		   System.out.println(browserName);
		   
		   driver = Browser.browserToRun(driver1, browserName);
		   driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		   
		   driver.navigate().to("http://slc03zqc.us.oracle.com:7001/C9_OrderStatusDashboard/");
 	       driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
 	      driver.manage().timeouts().pageLoadTimeout(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
 	      Thread.sleep(10000);
   	     
 	    driver.findElement(By.xpath(".//*[@id='oj-select-choice-basicSelect']/a")).click();	 
	driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		 Thread.sleep(15000);   
		   
		 driver.findElement(By.xpath(".//*[@id='oj-listbox-result-label-6']")).click();	 
		   driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		   Thread.sleep(5000);  
		  
		 System.out.println("external order id");
		   
		   driver.findElement(By.xpath(".//*[@id='accountName']")).click();	 
		   driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		   Thread.sleep(5000);   
		   
		   driver.findElement(By.xpath(".//*[@id='accountName']")).clear();	 
		   driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		   Thread.sleep(5000);
		   
		// driver.findElement(By.xpath(".//*[@id='accountName']")).sendKeys("1001_"+ordernumber);	 
		// driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS); 
		 
	   String sql= "38230074";
		 System.out.println("testing values:- " + "external_order_id like " + "'%" + sql + "%'");
		   driver.findElement(By.xpath(".//*[@id='accountName']")).sendKeys(""+"external_order_id like " + "'%" + sql + "%'"+"");	 
		
		  // driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS); 

		   driver.findElement(By.xpath(".//*[@id='btnSubmit']")).click();	 
		   driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
		   Thread.sleep(5000);  
		   
		   System.out.println("Result: -"+ driver.findElement(By.xpath(".//*[@id='tas_results']/tbody/tr[1]/td[11]")).getText());
		   
	       
	       WebDriverWait wait = new WebDriverWait(driver, 600);
	       wait.until(ExpectedConditions.textToBePresentInElementLocated(By.xpath(".//*[@id='tas_results']/tbody/tr[1]/td[11]"), "COMPLETED"));
	       driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
	 	   driver.manage().timeouts().pageLoadTimeout(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
	       System.out.println("success");
	       
			  
	
       
			
			
		
				
	/* ----------verification on SDI---------------*/
			
			//driver.findElement(By.xpath(".//*[@id='ui-id-2']")).click();	 
			//driver.manage().timeouts().implicitlyWait(Config.WAIT_FOR_SECONDS, TimeUnit.SECONDS);
				// Thread.sleep(15000);   
		
			
    } catch(Exception err) { 
        Assert.fail(err.getMessage());
}
}
@AfterClass
public void testCleanUp()   {
/*----- Logout ------*/
Utility.logOut(driver);
  //  Quit -closes all the open window
driver.quit();

  }
}
        
